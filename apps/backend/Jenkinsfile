pipeline {
    agent any
    environment {
        PROJECT_ID = 'seraphic-bliss-356414'
        CLUSTER_NAME = 'cluster001'
        LOCATION = 'us-central1-c'
        CREDENTIALS_ID = 'My First Project'
    }
    stages {
        stage('Deploy to K8s') {
             //steps{
                //step{
                    node{
                        def remote = [:]
                        remote.name = 'worker'
                        remote.host = '10.128.0.11'
                        remote.user = 'jenkins'
                        remote.password = env.jenkinsgce
                        remote.allowAnyHosts = true
                        stage('Remote SSH') {
                            sshCommand remote: remote, command: "ls -lrt"
                        }
                    }
                }

            //    step([$class: 'KubernetesEngineBuilder', projectId: env.PROJECT_ID, clusterName: env.CLUSTER_NAME, location: env.LOCATION, manifestPattern: 'apps/backend/deployment.yaml', credentialsId: env.CREDENTIALS_ID, verifyDeployments: true])
             //}
       // }
    }
}